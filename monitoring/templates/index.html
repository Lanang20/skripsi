{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link href="{% static 'css/index.css' %}" rel="stylesheet">
    <title>Landing Page | SIPDA Cilacap</title>
    <style>
        .logo-centered {
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: auto;
            margin-bottom: auto;
            width: 200px;
        }
    </style>
</head>
<body>
    <section id="Home">
        <div class="container col-xxl-8 px-4 py-12">
            <div class="row flex-lg-row-reverse align-items-center g-5 py-12">
                <div class="col-10 col-sm-8 col-lg-6">
                    <img src="{% static 'images/gambar-bendung.jpeg' %}" class="d-block mx-lg-auto img-fluid" alt="gambar-home" width="500" height="500" loading="lazy">
                </div>
                <div class="col-lg-6">
                    <h1 class="display-5 fw-bold lh-2 mb-3">Sistem Informasi Pencatatan Debit Air Cilacap (SIPDA Cilacap)</h1>
                    <p class="lead">
                        Sistem Informasi Pencatatan Debit Air ini dirancang untuk memudahkan petugas dan instansi terkait 
                        dalam mencatat, memantau, dan menganalisis debit air secara digital dan cepat. Web ini membantu 
                        dalam mitigasi bencana banjir dan pengambilan keputusan yang lebih efisien berbasis data.
                    </p>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <button type="button" class="btn btn-primary btn-sm btn-login px-4 me-md-2" 
                        data-bs-toggle="modal" data-bs-target="#exampleModal4" data-bs-whatever="@mdo">Login</button>
                    </div>
                    <!-- Modal Login -->
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start">
                        <div class="modal fade" id="exampleModal4" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-xl bg-transparent" style="border: none;">
                                <div class="modal-content bg-transparent" style="border: none;">
                                    <div class="modal-body bg-transparent" style="border: none;">
                                        <div class="container py-5 h-100">
                                            <div class="row d-flex justify-content-center align-items-center h-100">
                                                <div class="col col-xl-10">
                                                    <div class="card shadow" style="border-radius: 1rem;">
                                                        <div class="row g-5">
                                                            <div class="col-md-6 col-lg-5 d-none d-md-block">
                                                                <img id="gambar-login" src="{% static 'images/logo_psda.png' %}" alt="login form" class="img-fluid logo-centered">
                                                            </div>
                                                            <div class="col-md-6 col-lg-7 d-flex align-items-center">
                                                                <div class="card-body p-4 p-lg-5 text-black">
                                                                    <form method="post" action="{% url 'login_view' %}">
                                                                        <h5 class="h5-login mb-3">Silahkan login ke akun anda</h5>
                                                                        {% if msg %}
                                                                            <div class="alert alert-danger col-10" role="alert">
                                                                            {{ msg }}
                                                                            </div>
                                                                        {% endif %}
                                                                        {% csrf_token %}
                                                                        <div class="mb-1 col-10">
                                                                            <label for="recipient-name" class="col-form-label">Username</label>
                                                                            <input type="text" name="username" class="form-control" id="recipient-name" required>
                                                                        </div>
                                                                        <div class="mb-3 col-10">
                                                                            <label for="recipient-name" class="col-form-label">Password</label>
                                                                            <input type="password" name="password" class="form-control" id="recipient-name" required>
                                                                        </div>
                                                                        <div class="mb-3">
                                                                            <button type="submit" class="btn btn-primary btn-sm btn-login px-4 me-md-2">Login</button>
                                                                            <a href="{% url 'index' %}" class="btn btn-danger btn-cancel btn-sm px-4" data-bs-dismiss="modal">Cancel</a>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script type="text/javascript">
        // Menampilkan kembali modal jika terjadi kesalahan login
        document.addEventListener('DOMContentLoaded', function () {
            var modal = new bootstrap.Modal(document.getElementById('exampleModal4'));

            // Periksa apakah pesan error ada pada modal
            var errorAlert = document.querySelector('.alert-danger');
            if (errorAlert) {
                modal.show();
            }
        });
        window.addEventListener('scroll', function(){
            var navbar = document.querySelector('.custom-nav');
            navbar.classList.toggle('sticky-navbar', window.scrollY > 0);
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" 
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>